name: protoc install
description: Install protoc

runs:
  using: composite
  steps:
    - if: runner.os == 'Linux' && runner.arch == 'X64'
      run: |
        curl -o protoc.zip -L https://github.com/protocolbuffers/protobuf/releases/download/v31.1/protoc-31.1-linux-x86_64.zip
      shell: bash

    - if: runner.os == 'macOS' && runner.arch == 'X64'
      run: |
        curl -o protoc.zip -L https://github.com/protocolbuffers/protobuf/releases/download/v31.1/protoc-31.1-osx-x86_64.zip
      shell: bash

    - if: runner.os == 'macOS' && runner.arch == 'ARM64'
      run: |
        curl -o protoc.zip -L https://github.com/protocolbuffers/protobuf/releases/download/v31.1/protoc-31.1-osx-aarch_64.zip
      shell: bash

    - if: runner.os == 'Linux' && runner.arch == 'ARM64'
      run: |
        curl -o protoc.zip -L https://github.com/protocolbuffers/protobuf/releases/download/v31.1/protoc-31.1-linux-aarch_64.zip
      shell: bash

    - run: |
        unzip protoc.zip
        echo "PROTOC=$(pwd)/bin/protoc" >> $GITHUB_ENV
      shell: bash
