name: svm install
description: Install svm
runs:
  using: composite
  steps:
    - if: runner.os == 'macOS' && runner.arch == 'ARM64'
      run: |
        pgrep -q oahd && echo Rosetta already installed || /usr/sbin/softwareupdate --install-rosetta --agree-to-license
      shell: bash

    - run: |
        cargo install svm-rs
        svm install 0.8.17
        svm use 0.8.17
      shell: bash
